"use strict";!function(){var g=[];function m(e){var t=e.name,n=e.price,a=e.id,o=e.img;document.querySelector(".cart-image").disabled=!1;var r,c,d={price:n,name:t,toyId:a,inCart:1,img:o};g.some(function(e){return e.toyId===a})?(r=a,c=g.findIndex(function(e){return e.toyId===r}),g[c].inCart=g[c].inCart+1):g.push(d),w(),C(),i(d,{popupType:"add"})}var e=document.querySelector(".cart-image"),E=document.querySelector(".cart-block");function w(){var e=document.querySelector(".cart-items-counter"),t=g.reduce(function(e,t){return e+t.inCart},0);e.textContent=t;var n=g.reduce(function(e,t){return e+t.price*t.inCart},0);document.querySelector(".cart-items-total-price").textContent="".concat(n.toFixed(2)," zł")}function C(){E.innerHTML="",g.length?g.map(function(e){var t=document.createElement("div");t.classList.add("cart__item");var n=document.createElement("img");n.classList.add("cart__item-img"),n.src="".concat(e.img);var a=document.createElement("p");a.classList.add("cart__item-price"),a.textContent="".concat((e.price*e.inCart).toFixed(2));var o=document.createElement("p");o.classList.add("cart__item-name"),o.textContent=e.name;var r=document.createElement("p");r.classList.add("cart__item-incart"),r.textContent=e.inCart;var c=document.createElement("button");c.classList.add("cart__item-delete"),c.innerHTML='<img src="img/icons/delete.png">',c.addEventListener("click",function(){i(e,{popupType:"delete"})}),t.append(n,o,a,r,c),E.appendChild(t)}):g.length||(e.disabled=!0,E.classList.remove("show"))}function i(e,t){var n=e.img,a=e.name,o=e.price,r=e.toyId,c=e.inCart,d=t.popupType,i=document.createElement("div");i.classList.add("popup"),i.classList.contains("popup")&&(document.body.style.overflowY="hidden"),i.addEventListener("click",function(e){var t=e.target;t.classList.contains("popup")&&(t.parentNode.removeChild(i),document.body.style.overflowY="auto")});var s=document.createElement("div");s.classList.add("popup__wrapper");var p=document.createElement("p");"add"===d?p.classList.add("popup__wrapper-status"):p.classList.add("popup__wrapper-status","delete"),p.textContent="add"===d?"Dodano do koszyka ":"Usunąć z kosza? ";var l=document.createElement("img");l.src="".concat(n);var u=document.createElement("p");u.classList.add("popup__wrapper-name"),u.textContent="".concat(a);var m=document.createElement("p");m.classList.add("popup__wrapper-price"),m.textContent="".concat((o*c).toFixed(2)," zł");var v=document.createElement("button");v.classList.add("popup__wrapper-close"),v.textContent="X",v.addEventListener("click",function(e){e.currentTarget.parentNode.parentNode.remove(),document.body.style.overflowY="auto"});var y=document.createElement("div");if("add"===d){var L=document.createElement("button");L.classList.add("popup__wrapper-cart","btn"),L.textContent="Wyśwetl koszyk",L.addEventListener("click",function(e){e.currentTarget.parentNode.parentNode.parentNode.remove(),document.body.style.overflowY="auto",E.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"}),E.classList.add("show")}),y.append(L)}else{var _=document.createElement("button");_.classList.add("popup__wrapper-cart","btn","error"),_.textContent="Usunąć",_.addEventListener("click",function(e){!function(e,t){var n=e.toyId;t.currentTarget.parentNode.parentNode.parentNode.remove(),document.body.style.overflowY="auto";var a=g.findIndex(function(e){return e.toyId===n});g.splice(a,1),C(),w()}({toyId:r},e)});var f=document.createElement("button");f.classList.add("popup__wrapper-cart","btn","save"),f.textContent="Zostawić",f.addEventListener("click",function(e){e.currentTarget.parentNode.parentNode.parentNode.remove(),document.body.style.overflowY="auto"}),y.append(f,_)}s.append(p,l,u,m,y,v),i.appendChild(s),document.body.appendChild(i)}function t(o){document.getElementById("toy-search").addEventListener("keyup",function(e){var t,n,a;t=o,n=e.target.value.trim().toLocaleLowerCase(),a=t.filter(function(e){return e.name.trim().toLocaleLowerCase().includes(n)}),v.innerHTML="",y.innerHTML="",r(a,n)})}e.addEventListener("click",function(){E.classList.toggle("show")});var v=document.querySelector(".recommended-toys"),y=document.querySelector(".bestseller-toys");function r(e,t){var n=e.filter(function(e){return"bestseller"===e.option});n.length?n.map(function(e){o(e)}):c(y,t);var a=e.filter(function(e){return"polecamy"===e.option});a.length?a.map(function(e){o(e)}):c(v,t)}function o(e){var t=document.createElement("div");t.classList.add("toy__card");var n=document.createElement("div");n.classList.add("toy__card-header");var a=document.createElement("p");a.classList.add("toy__card-header-option"),a.textContent=e.option;var o=document.createElement("span");o.classList.add("toy__card-header-discount"),e.discount?o.textContent=e.discount:o.style.display="none";var r=document.createElement("img");r.classList.add("toy__card-img"),r.src="".concat(e.img);var c=document.createElement("p");c.classList.add("toy__card-name"),c.textContent=e.name;var d=document.createElement("span");d.classList.add("toy__card-price"),d.textContent="".concat(e.price.toFixed(2)," zł");var i=document.createElement("span");i.classList.add("toy__card-price-old"),e.oldPrice?i.textContent="".concat(e.oldPrice.toFixed(2)," zł"):i.style.display="none";var s=document.createElement("div");s.classList.add("toy__card-option-wrapper");var p=document.createElement("button");p.classList.add("toy__card-option-wrapper-button","add"),p.innerHTML='<img src="img/icons/shopping-cart.png"> do koszyka',p.addEventListener("click",function(){m(e)});var l=document.createElement("button");l.classList.add("toy__card-option-wrapper-button","see"),l.innerHTML='<img src="img/icons/eye.png">';var u=document.createElement("button");u.classList.add("toy__card-option-wrapper-button","like"),u.innerHTML='<img src="img/icons/like.png">',u.addEventListener("click",function(e){e.currentTarget.classList.toggle("active")}),s.append(p,l,u),n.append(a,o),t.append(n,r,s,c,d,i),"bestseller"===e.option?y.append(t):"polecamy"===e.option&&v.append(t)}function c(e,t){var n=document.createElement("p");n.classList.add("search-result"),n.innerHTML="nie znaleziono zabawki pod takim tytułem <span>'".concat(t,"'</span></>"),e.append(n)}document.addEventListener("DOMContentLoaded",function(){var e;axios.get("".concat("https://skyshoprecruitmentproject.firebaseio.com/","/toys.json")).then(function(e){r(e.data),t(e.data)}).catch(function(e){return console.log("error",e)}),$(".hero__slider-wrapper").owlCarousel({items:1,nav:!0,dots:!0,loop:!0,responsive:{0:{items:1}}}),$(".toy__companies-wrapper").owlCarousel({nav:!0,items:7,margin:60,loop:!0,autoplay:!0,autoplaySpeed:300,responsive:{0:{items:2},600:{items:4},1e3:{items:7}}}),w(),e=document.querySelector("header"),window.addEventListener("scroll",function(){20<=window.scrollY?e.classList.add("header-scrolled"):e.classList.remove("header-scrolled"),e.classList.contains("header-scrolled")?E.classList.add("sticked"):E.classList.remove("sticked")})})}();
//# sourceMappingURL=maps/app.js.map
